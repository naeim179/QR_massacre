<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QR Massacre â€” Challenge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --card: #020617;
      --border: #1f2937;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --radius-lg: 16px;
      --radius-full: 999px;
      --shadow: 0 0 40px rgba(15,23,42,0.9);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0b1120 0, #020617 50%, #000 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 32px 12px 40px;
      color: var(--text);
    }
    .container { width: 100%; max-width: 900px; }

    header {
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    .title-block h1 {
      font-size: 1.35rem;
      letter-spacing: .08em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo-dot {
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: radial-gradient(circle, #38bdf8, #0ea5e9 40%, transparent 70%);
      box-shadow:
        0 0 12px rgba(56,189,248,0.9),
        0 0 30px rgba(56,189,248,0.8);
    }
    .subtitle {
      margin-top: 4px;
      font-size: .9rem;
      color: var(--muted);
    }
    .subtitle strong { color: var(--accent); }
    .subtitle-ar {
      margin-top: 2px;
      font-size: .85rem;
      color: var(--muted);
      direction: rtl;
      text-align: right;
    }
    .back-link {
      font-size: .86rem;
      text-decoration: none;
      color: var(--accent);
      border-radius: var(--radius-full);
      border: 1px solid rgba(148,163,184,0.4);
      padding: 6px 12px;
      background: rgba(15,23,42,.85);
      white-space: nowrap;
    }
    .back-link:hover { border-color: var(--accent); }

    .card {
      background: var(--card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 16px 16px 18px;
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: "";
      position: absolute;
      inset: -140px;
      background: conic-gradient(
        from 220deg,
        transparent 0,
        rgba(56, 189, 248, 0.16) 12%,
        transparent 32%,
        transparent 60%,
        rgba(56, 189, 248, 0.14) 72%,
        transparent 90%
      );
      opacity: 0.5;
      pointer-events: none;
    }
    .card-inner {
      position: relative;
      z-index: 1;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: .74rem;
      padding: 4px 10px;
      border-radius: var(--radius-full);
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.9);
      color: var(--muted);
    }
    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }
    .badge-level-beginner .badge-dot { background:#22c55e; }
    .badge-level-intermediate .badge-dot { background:#eab308; }
    .badge-level-advanced .badge-dot { background:#fb923c; }
    .badge-level-expert .badge-dot { background:#f97373; }

    h2 {
      font-size: 1.15rem;
      margin-bottom: 6px;
    }
    .slug {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: .8rem;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .intro {
      font-size: .9rem;
      color: var(--text);
      margin-bottom: 6px;
      line-height: 1.5;
    }
    .intro-ar {
      font-size: .86rem;
      color: var(--muted);
      margin-bottom: 10px;
      direction: rtl;
      text-align: right;
      line-height: 1.5;
    }

    .steps {
      margin-top: 4px;
      font-size: .86rem;
      color: var(--text);
      line-height: 1.5;
    }
    .steps ol {
      margin-left: 18px;
      margin-top: 4px;
    }
    .steps li { margin-bottom: 3px; }
    .steps-ar {
      margin-top: 6px;
      font-size: .84rem;
      color: var(--muted);
      direction: rtl;
      text-align: right;
      line-height: 1.6;
    }

    .reveal-btn {
      margin-top: 12px;
      border-radius: var(--radius-full);
      border: 1px solid rgba(148,163,184,0.7);
      padding: 9px 18px;
      font-size: .9rem;
      cursor: pointer;
      background: linear-gradient(135deg, #020617, #020617);
      color: var(--accent);
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .reveal-btn span.icon { font-size: .95rem; }
    .reveal-btn:hover {
      border-color: var(--accent);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 18px 35px rgba(8,47,73,0.95);
    }

    .qr-wrapper {
      margin-top: 14px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.4);
      padding: 10px;
      background: radial-gradient(circle at top, #020617, #020617 60%, #000);
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .qr-wrapper.visible {
      display: flex;
    }
    .qr-wrapper:hover {
      transform: translateY(-3px);
      border-color: var(--accent);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 22px 45px rgba(8,47,73,0.95);
    }
    .qr-wrapper img {
      max-width: 240px;
      width: 100%;
      height: auto;
      background: white;
      border-radius: 8px;
    }
    .qr-caption {
      font-size: .8rem;
      color: var(--muted);
      text-align: center;
    }
    .qr-caption strong { color: var(--accent); }
    .hint-tap {
      font-size: .78rem;
      color: var(--muted);
      margin-top: 2px;
      text-align: center;
      font-style: italic;
    }

    .details {
      display: none;
      margin-top: 12px;
      font-size: .88rem;
      color: var(--text);
      line-height: 1.6;
    }
    .details.visible {
      display: block;
    }
    .details code {
      background: rgba(15,23,42,0.8);
      padding: 2px 4px;
      border-radius: 4px;
      font-size: .82rem;
    }
    .details-ar {
      direction: rtl;
      text-align: right;
      font-size: .84rem;
      color: var(--muted);
      margin-top: 6px;
      line-height: 1.6;
    }

    .start-btn {
      margin-top: 10px;
      border-radius: var(--radius-full);
      border: none;
      padding: 8px 16px;
      font-size: .9rem;
      cursor: pointer;
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      color: #0b1120;
      font-weight: 600;
    }
    .start-btn:hover { filter: brightness(1.07); }

    .note {
      margin-top: 10px;
      font-size: .78rem;
      color: var(--muted);
    }

    .error-card {
      background: var(--card);
      border-radius: var(--radius-lg);
      border: 1px solid #991b1b;
      box-shadow: var(--shadow);
      padding: 18px;
      margin-top: 30px;
    }
    .error-title {
      font-size: 1rem;
      color: #fecaca;
      margin-bottom: 6px;
    }
    .error-text {
      font-size: .88rem;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .error-link {
      font-size: .86rem;
      color: var(--accent);
      text-decoration: none;
    }

    @media (max-width: 768px) {
      body { padding-top: 20px; }
      header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }
      .subtitle-ar { font-size: .82rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title-block">
        <h1>
          <span class="logo-dot"></span>
          QR Massacre â€” Challenge
        </h1>
        <p class="subtitle">
          Each card idea becomes a playable QR + SQLi challenge. Scan the QR on your phone,
          then attack the URL like a real CTF (but on a safe lab).
        </p>
        <p class="subtitle-ar">
          ÙƒÙ„ ÙƒØ§Ø±Ø¯ Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ø£ÙÙƒØ§Ø± ÙŠØªØ­ÙˆÙ‘Ù„ Ù„ØªØ­Ø¯Ù‘ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ <strong>QR + SQLi</strong>.
          Ø§Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªØºÙ„Ø§Ù„ Ø¹Ù„Ù‰ Ù„Ø§Ø¨ Ø¢Ù…Ù† ÙˆØ¶Ù…Ù† Ø¨ÙŠØ¦Ø© ØªØ¯Ø±ÙŠØ¨.
        </p>
      </div>
      <a href="index.html" class="back-link">â† Back to ideas list</a>
    </header>

    <main id="main"></main>
  </div>

  <script>
    function getIdFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const idStr = params.get("id");
      const id = parseInt(idStr, 10);
      if (Number.isNaN(id) || id < 1 || id > 50) return null;
      return id;
    }

    function getLevel(id) {
      if (id >= 1 && id <= 10) return { key: "beginner", label: "Beginner" };
      if (id >= 11 && id <= 20) return { key: "intermediate", label: "Intermediate" };
      if (id >= 21 && id <= 35) return { key: "advanced", label: "Advanced" };
      return { key: "expert", label: "Expert" };
    }

    const id = getIdFromUrl();
    const mainEl = document.getElementById("main");

    if (!id) {
      mainEl.innerHTML = `
        <section class="error-card">
          <h2 class="error-title">Invalid or missing challenge ID</h2>
          <p class="error-text">
            This page expects a URL like <code>?id=7</code>.  
            Use a QR from the main ideas page or open a card and click "Start challenge".
          </p>
          <a class="error-link" href="index.html">â† Go back to the ideas library</a>
        </section>
      `;
    } else {
      const padded = String(id).padStart(2, "0");
      const level = getLevel(id);

      mainEl.innerHTML = `
        <section class="card">
          <div class="card-inner">
            <div class="badge-row">
              <div class="badge badge-level-${level.key}">
                <span class="badge-dot"></span>
                ${level.label} Â· Challenge #${id}
              </div>
              <div class="badge">
                <span class="badge-dot" style="background:#38bdf8;"></span>
                QR + SQLi lab
              </div>
            </div>

            <h2>Challenge #${id} â€” QR + SQL Injection</h2>
            <div class="slug">Linked to idea card #${id} from the main QR + SQLi ideas library.</div>

            <p class="intro">
              This challenge starts from a <strong>QR code</strong> and ends with a
              <strong>SQL injection</strong> on a training endpoint. Use this page
              only as the â€œlauncherâ€: reveal the QR, scan it on your phone, then
              attack the URL you get using typical SQLi techniques.
            </p>
            <p class="intro-ar">
              Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø¯Ù‘ÙŠ ÙŠØ¨Ø¯Ø£ Ù…Ù† <strong>ÙƒÙˆØ¯ QR</strong> ÙˆÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù€
              <strong>SQL Injection</strong> Ø¹Ù„Ù‰ Ø³ÙƒØ±Ø¨Øª ØªØ¯Ø±ÙŠØ¨ÙŠ.  
              Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ÙƒÙ†Ù‚Ø·Ø© Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚ ÙÙ‚Ø·: Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù€ QRØŒ Ø§Ù…Ø³Ø­Ù‡ Ø¨Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ
              Ø«Ù… Ø§Ø³ØªÙ‡Ø¯Ù Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø§ØªØ¬ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ§Øª SQLi Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ÙÙƒØ±Ø© Ø±Ù‚Ù… <strong>${id}</strong>.
            </p>

            <div class="steps">
              <strong>How to play (EN):</strong>
              <ol>
                <li>Click the button below to <strong>reveal the QR</strong> for this challenge.</li>
                <li>Use your <strong>phone camera</strong> (or QR app) to scan the code.</li>
                <li>Open the URL you get â€” this is the <strong>entry point</strong> of the lab.</li>
                <li>Look for an input/parameter (e.g. <code>id</code>, <code>name</code>, <code>page</code>) that flows into SQL.</li>
                <li>Abuse it with SQL injection techniques that match idea #${id} from the main page.</li>
              </ol>
            </div>
            <div class="steps-ar">
              <strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨ (AR):</strong><br/>
              Ù¡) Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ù„Ø¹Ø±Ø¶ <strong>ÙƒÙˆØ¯ Ø§Ù„Ù€ QR</strong> Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø¯Ù‘ÙŠ.<br/>
              Ù¢) Ø§Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆØ§Ù„ Ø£Ùˆ ØªØ·Ø¨ÙŠÙ‚ QR.<br/>
              Ù£) Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø§ØªØ¬ â€” Ù‡Ø°Ø§ Ù‡Ùˆ <strong>Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„</strong> Ù„Ù„Ù‘Ø§Ø¨.<br/>
              Ù¤) Ø¯ÙˆÙ‘Ø± Ø¹Ù„Ù‰ Ø¨Ø§Ø±Ø§Ù…ØªØ± (Ù…Ø«Ù„ <code>id</code> Ø£Ùˆ <code>name</code> Ø£Ùˆ <code>page</code>) ÙŠØ¯Ø®Ù„ ÙÙŠ Ø§Ø³ØªØ¹Ù„Ø§Ù… SQL.<br/>
              Ù¥) Ø§Ø³ØªØ®Ø¯Ù… Ø­Ù‚Ù† SQL Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„ÙÙƒØ±Ø© Ø§Ù„ØªØ­Ø¯Ù‘ÙŠ Ø±Ù‚Ù… <strong>${id}</strong> ÙƒÙ…Ø§ Ù‡ÙŠ Ù…ÙˆØ¶Ù‘Ø­Ø© ÙÙŠ ÙƒØ§Ø±Ø¯ Ø§Ù„ÙÙƒØ±Ø© ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.
            </div>

            <button class="reveal-btn" id="revealBtn">
              <span class="icon">ğŸ‘ï¸</span>
              Click to view QR &nbsp;|&nbsp; Ø§Ø¶ØºØ· Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù€ QR
            </button>

            <div class="qr-wrapper" id="qrBox">
              <img src="qr/QR_${padded}.png" alt="QR code for challenge ${id}" />
              <div class="qr-caption">
                Scan this QR with your phone to open the <strong>real lab URL</strong> for challenge #${id}.<br/>
                Ø§Ù…Ø³Ø­ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù„ÙØªØ­ <strong>Ø±Ø§Ø¨Ø· Ø§Ù„Ù„Ø§Ø¨</strong> Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„ØªØ­Ø¯Ù‘ÙŠ Ø±Ù‚Ù… ${id}.
              </div>
              <div class="hint-tap">
                After you scan and open the URL on your phone, tap this QR again here to show extra hints ğŸ‘‡  
                Ø¨Ø¹Ø¯ Ù…Ø§ ØªÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù„Ù‰ Ø¬ÙˆÙ‘Ø§Ù„ÙƒØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ Ù„Ø¹Ø±Ø¶ ØªÙ„Ù…ÙŠØ­Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©.
              </div>
            </div>

            <div class="details" id="details">
              <p>
                <strong>What now?</strong>  
                Use the URL from the QR as if it were a CTF target. Try changing parameters,
                breaking the SQL query, or extracting extra data (like a flag) depending on
                the idea behind challenge #${id}.
              </p>
              <p class="details-ar">
                <strong>Ù…Ø§Ø°Ø§ Ø¨Ø¹Ø¯ØŸ</strong><br/>
                ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø§ØªØ¬ Ù…Ù† Ø§Ù„Ù€ QR ÙƒØ£Ù†Ù‡ Ù‡Ø¯Ù CTF Ø­Ù‚ÙŠÙ‚ÙŠ. ØºÙŠÙ‘Ø± Ø§Ù„Ù‚ÙŠÙ… ÙÙŠ Ø§Ù„Ø¨Ø§Ø±Ø§Ù…ØªØ±Ø§ØªØŒ
                Ø­Ø§ÙˆÙ„ ØªÙƒØ³Ø± Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ù€ SQL Ø£Ùˆ ØªØ³ØªØ®Ø±Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ù…Ø«Ù„ Ø§Ù„ÙÙ„Ø§Ø¬) Ø¨Ø­Ø³Ø¨
                ÙÙƒØ±Ø© Ø§Ù„ØªØ­Ø¯Ù‘ÙŠ Ø±Ù‚Ù… <strong>${id}</strong> ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø£ÙÙƒØ§Ø±.
              </p>
              <button class="start-btn" type="button">
                Iâ€™ve scanned the QR â€” start hacking ğŸ’»
              </button>
              <p class="note">
                âš  Training-only: these challenges are meant for <strong>education and CTF labs</strong>,
                not for testing real systems without proper permission.
              </p>
            </div>
          </div>
        </section>
      `;

      const qrBox = document.getElementById("qrBox");
      const details = document.getElementById("details");
      const revealBtn = document.getElementById("revealBtn");

      revealBtn.addEventListener("click", () => {
        qrBox.classList.add("visible");
        revealBtn.style.display = "none";
      });

      qrBox.addEventListener("click", () => {
        details.classList.toggle("visible");
      });
    }
  </script>
</body>
</html>
